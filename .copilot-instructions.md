# GitHub Copilot Instructions for CharacterSheet Project

## Project Overview
This is a D&D 5e Interactive Character Sheet web application built as a single-file HTML application with embedded CSS and JavaScript. The architecture uses CSS Grid layout with Tailwind CSS, vanilla JavaScript, and LocalStorage for state persistence.

**Current Development Context**: The project is being enhanced with edit mode functionality. See `EDIT_MODE_PLAN.md` for the complete roadmap, phases, and current status.

## Current Architecture
- **Single-file HTML application** (`index.html`) with embedded CSS and JavaScript
- **CSS Grid layout** with responsive design using Tailwind CSS
- **Vanilla JavaScript** with LocalStorage for state persistence
- **Component-based structure** using CSS classes and data attributes
- **Interactive elements**: HP tracking, spell slot trackers, notes area

## Code Style Guidelines

### HTML Structure
- Use semantic HTML5 elements
- Maintain CSS Grid layout with `tile` class components
- Use `data-*` attributes for JavaScript hooks
- Keep accessibility in mind with proper ARIA labels
- Preserve existing responsive design patterns

### CSS Guidelines
- Use Tailwind CSS classes primarily
- Custom CSS in `<style>` tags for component-specific styling
- Follow existing naming conventions:
  - `.tile` for main content blocks
  - `.tile-header` for section headers
  - `.tile-content` for main content areas
  - `.tracker-dot` for interactive tracking elements
  - `.tooltip` and `.tooltiptext` for hover information

### JavaScript Patterns
- Use vanilla JavaScript (no frameworks)
- Follow existing patterns for DOM manipulation
- Use `addEventListener` for event handling
- Maintain separation of concerns:
  - State management functions
  - UI update functions
  - Event handlers
  - LocalStorage operations

### Data Management
- LocalStorage keys use descriptive names without prefixes
- Save state immediately on user interactions
- Load state on `DOMContentLoaded`
- Use JSON for complex data structures

## Key Components to Understand

### 1. Tracker System
```javascript
// Trackers are defined with data attributes
<span data-tracker="actionSurge" data-max="1"></span>

// JavaScript creates interactive dots dynamically
function initializeTrackers() {
    // Creates clickable dots based on data-max value
    // Saves state to localStorage with tracker ID
}
```

### 2. Tooltip System
```html
<span class="tooltip">Sneak Attack
    <span class="tooltiptext">Detailed explanation here</span>
</span>
```

### 3. Tile Structure
```html
<div class="tile md:col-span-2">
    <h2 class="tile-header">
        <svg>...</svg>Section Title
    </h2>
    <div class="tile-content">
        <!-- Content here -->
    </div>
</div>
```

## Code Generation Guidelines
- **Preserve existing functionality**: Don't break current features
- **Progressive enhancement**: Add features as overlay to existing structure
- **Mobile-first**: Ensure controls work on touch devices
- **Consistent UX**: Follow existing visual design patterns

## Documentation Maintenance
**CRITICAL**: Always keep project documentation updated when making changes:

1. **Update `EDIT_MODE_PLAN.md`** when:
   - Completing tasks (check off completed items)
   - Moving between phases (update status indicators)
   - Discovering new requirements or changes to timeline
   - Adding new tasks or modifying existing ones
   - Reaching milestones or deliverables

2. **Update `.copilot-instructions.md`** when:
   - Adding new code patterns or conventions
   - Changing architecture or file structure
   - Adding new components or systems
   - Changing localStorage schemas or data patterns

**Documentation First Principle**: Before implementing major changes, update the plan. After implementing changes, update both the plan status and the instructions to reflect new patterns.

## Implementation Guidelines

### Edit Mode Visual Indicators
- Add visual cues for interactive elements (borders, icons, etc.)
- Use consistent styling for editable elements
- Provide clear save/cancel feedback

### Data Management Approach
- Use data attributes to bridge hardcoded HTML with dynamic content
- Maintain compatibility with existing structure during any transitions
- Follow existing LocalStorage patterns for state persistence

### Event Handling
- Use event delegation for dynamically created elements
- Maintain existing event handlers for current functionality
- Add edit-specific handlers without conflicts

## Code Patterns to Follow

### LocalStorage Operations
```javascript
// Follow existing patterns
function saveCustomData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
}

function loadCustomData(key) {
    const saved = localStorage.getItem(key);
    return saved ? JSON.parse(saved) : null;
}
```

### DOM Manipulation
```javascript
// Use existing patterns for consistent behavior
document.addEventListener('DOMContentLoaded', () => {
    // Initialization code here
});

// Event handlers
element.addEventListener('click', (event) => {
    // Handle interaction
    // Save state if needed
});
```

### CSS Classes for Edit Mode
```css
/* Add edit-specific styles following existing patterns */
.edit-mode .editable-element {
    border: 2px dashed #63b3ed;
    cursor: text;
}

.edit-indicator {
    color: #63b3ed;
    font-size: 0.75rem;
}
```

## Testing Considerations
- Test all existing functionality after changes
- Verify LocalStorage persistence across browser sessions
- Check responsive design on mobile devices
- Ensure tooltips and trackers continue working
- Test edit mode toggle behavior

## Performance Notes
- Keep JavaScript efficient for mobile devices
- Minimize DOM manipulations
- Use requestAnimationFrame for smooth animations
- Lazy-load edit functionality when not in use

## Accessibility Requirements
- Maintain keyboard navigation
- Provide screen reader friendly edit controls
- Use semantic HTML for new edit elements
- Ensure color contrast meets standards

## Future Architecture Notes
- Plan for component modularity in later phases
- Consider Web Components for Phase 4 advanced features
- Prepare for potential CSS Grid manipulation
- Design for eventual drag-and-drop functionality

## Common Gotchas
- Don't break existing tracker initialization
- Preserve tooltip positioning logic
- Maintain HP input functionality
- Keep reset button behavior intact
- Ensure grid layout doesn't break on mobile

## File Structure Expectations
Currently single-file, but plan for future modularization:
- Keep CSS in `<style>` tags for now
- JavaScript in `<script>` tags at bottom
- Consider extraction to separate files in Phase 2+

Remember: The goal is to enhance, not replace. Every change should add functionality while preserving the existing user experience.